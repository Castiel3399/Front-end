<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8" />
  <!--禁止电话号码和邮箱识别-->
  <meta content="telephone=no,email=no" name="format-detection" />
  <title>有好货</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />

  <style type="text/css">
    html,
    body {
      margin: 0 0 0 0;
      padding: 0 0 0 0;
      width: 100%;
      height: 100%;
    }

    body {
      -webkit-user-select: none;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      -webkit-touch-callout: none;
    }

    * {
      -webkit-text-size-adjust: none;
    }

  </style>
  <script type="text/javascript">
    //关闭选择
    //document.addEventListener("selectstart",function(e){ e.preventDefault(); });
    //避免鼠标变成文本选择形状
    //document.addEventListener("mousedown",function(e){ e.preventDefault(); });
    //避免上下滚屏
    // document.addEventListener("touchmove", function (e) { if (e.touches.length == 2) e.preventDefault(); }, { passive: false });
    // document.addEventListener("touchmove", function (e) { if (e.touches.length == 1) e.preventDefault(); }, { passive: false });
    // document.addEventListener("touchstart", function (e) { if (e.touches.length == 1) e.preventDefault(); }, { passive: false });
    document.addEventListener("touchmove", function (e) {
      if (e.touches.length == 1)
        e.preventDefault();
    }, {
      passive: false
    });
  </script>
  <script>
    // function check() {
    //   if (domReady && data) {
    //     render();
    //   }
    // }
    // function render() {
    //   console.log(data);
    // }
    // let data;
    // let domReady = false;
    // document.addEventListener('DOMContentLoaded', (event) => {
    //   domReady = true;
    //   check();
    // });

    // let req = new XMLHttpRequest();
    // req.open('get', './data.json', true);
    // req.send(null);

    // req.addEventListener('readystatechange', (event) => {
    //   if (req.readyState === 4) {
    //     data = req.responseText;
    //     check();
    //   }
    // })

    function happen(obj, type, config) {
      return new Promise((resolve, reject) => {
        obj.addEventListener(type, resolve, config);
      })
    }

    // happen(document, 'DOMContentLoaded').then(() => {
    //   console.log('000000000');
    // })

    // fetch('./data.json').then(res => {
    //   console.log('-------------');
    //   console.log(res);
    //   return res.json();
    // }).then(data => {
    //   console.log('-------------');
    //   console.log(data);
    // })

    void async function() {
      const [result, evt] = await Promise.all([
        fetch('./data.json').then(res => res.json()),
        happen(document, 'DOMContentLoaded'),
      ]);
      console.log(result);
    }();
  </script>
</head>

<body>
  <div id="app"></div>
  <script src="main.js"></script>
</body>

</html>
