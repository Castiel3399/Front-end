(function(t){function e(e){for(var a,o,c=e[0],s=e[1],u=e[2],f=0,h=[];f<c.length;f++)o=c[f],r[o]&&h.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);l&&l(e);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("64a9"),r=n.n(a);r.a},"0b52":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("othello-game")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"othello-container"},[n("div",{staticClass:"othello-board"},[t._l(t.mapData,function(e,a){return[t._l(e,function(e,r){return n("div",{key:"cell-"+a+"-"+r,staticClass:"othello-cell",class:t.getClassName(e),on:{click:function(e){return t.move(a,r)}}})}),n("br",{key:"breakline-"+a})]})],2),n("div",{staticClass:"othello-tooltip"},[t._v("\n    "+t._s(t.tooltip)+"\n  ")]),n("div",{staticClass:"othello-control"},[n("button",{on:{click:t.moveBack}},[t._v("回退")]),n("button",{on:{click:t.reStart}},[t._v("重新开始")])])])},c=[],s=(n("456d"),n("ac6a"),n("d225")),u=n("b0b4"),l=n("bd86");function f(t){return JSON.parse(JSON.stringify(t))}var h=1,p=2,v=-1,d=function(){function t(e){Object(s["a"])(this,t),Object(l["a"])(this,"defaultData",[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,2,1,0,0,0],[0,0,0,1,2,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]),Object(l["a"])(this,"derictions",{left:[0,-1],right:[0,1],up:[-1,0],down:[1,0],leftTop:[-1,-1],leftDown:[1,-1],rightTop:[-1,1],rightDown:[1,1]}),this.map=e||f(this.defaultData)}return Object(u["a"])(t,[{key:"move",value:function(t){var e=this,n=t.x,a=t.y,r=t.target,i=!1;if(Object.keys(this.derictions).forEach(function(t){var o=e.derictions[t],c=e.findOneWay({x:n,y:a,target:r,deriction:o});if(c){var s=c.x,u=c.y;while(l(o),e.boundaryCheck(s,u))if(e.map[s][u]=r,s===n&&u===a)break;i=!0}function l(t){s-=t[0],u-=t[1]}}),!i)return"当前位置不可落子";this.markBoundary();var o=r===p?h:p,c=this.checkAvailable({target:o}),s=!1;c||(s=!this.checkAvailable({target:r}));var u={map:this.map,ifNextAvailable:c,ifEnd:s};return u}},{key:"setMap",value:function(t){this.map=f(t||this.defaultData)}},{key:"markBoundary",value:function(){for(var t=this,e=function(e){for(var n=function(n){if(t.map[e][n]<=0)return"continue";Object.keys(t.derictions).forEach(function(a){var r=e+t.derictions[a][0],i=n+t.derictions[a][1];t.boundaryCheck(r,i)&&0===t.map[r][i]&&(t.map[r][i]=v)})},a=0;a<8;a++)n(a)},n=0;n<8;n++)e(n)}},{key:"checkAvailable",value:function(t){for(var e=this,n=t.target,a=!1,r=function(t,r){var i=function(i){return e.map[t][i]!==v?"continue":(r=Object.keys(e.derictions).some(function(c){var s=e.findOneWay({x:t,y:i,target:n,deriction:e.derictions[c]});return s?(a=!0,o=r,!0):(o=r,!1)}),r?"break":void 0)};t:for(var c=0;c<8;c++){var s=i(c);switch(s){case"continue":continue;case"break":break t}}if(r)return o=r,"break";o=r},i=0,o=!1;i<8;i++){var c=r(i,o);if("break"===c)break}return a}},{key:"boundaryCheck",value:function(t,e){return t>=0&&t<=7&&e>=0&&e<=7}},{key:"findOneWay",value:function(t){var e=t.x,n=t.y,a=t.deriction,r=t.target;function i(t){c+=t[0],s+=t[1]}var o=!1,c=e,s=n,u=r,l=r===p?h:p;while(i(a),this.boundaryCheck(c,s))if(this.map[c][s]===l)o=!0;else{if(this.map[c][s]===u)break;if(this.map[c][s]<=0){o=!1;break}}return this.boundaryCheck(c,s)||(o=!1),!!o&&{x:c,y:s}}}]),t}(),b=function(){function t(){Object(s["a"])(this,t),this.currentTarget=h,this.status=1,this.pattern=new d,this.patterns=[],this.record()}return Object(u["a"])(t,[{key:"getMap",value:function(){return f(this.pattern.map)}},{key:"move",value:function(t,e){var n=this.pattern.move({x:t,y:e,target:this.currentTarget});return"string"===typeof n?n:(n.ifNextAvailable?(this.currentTarget=this.currentTarget===p?h:p,this.status=2):n.ifEnd?this.status=0:this.status=3,this.record(),!0)}},{key:"getTip",value:function(){var t="",e=this.countChess(),n=e.countBlack,a=e.countWhite;switch(this.status){case 0:t=n!==a?"游戏已结束, ".concat(n>a?"黑":"白","棋赢!"):"游戏结束, 平局";break;case 1:t="开局, 黑棋先手";break;case 2:t="".concat(this.currentTarget===p?"白":"黑","棋轮");break;case 3:t="PASS: ".concat(this.currentTarget===p?"白":"黑","棋继续走");break;default:}return t}},{key:"reStart",value:function(){this.currentTarget=h,this.status=1,this.pattern.setMap()}},{key:"record",value:function(){this.patterns.push({map:f(this.pattern.map),currentTarget:this.currentTarget,status:this.status})}},{key:"moveBack",value:function(){if(1===this.patterns.length)return!1;this.patterns.pop();var t=this.patterns[this.patterns.length-1];this.currentTarget=t.currentTarget,this.status=t.status,this.pattern.setMap(t.map)}},{key:"countChess",value:function(){for(var t=0,e=0,n=0,a=0;a<8;a++)for(var r=0;r<8;r++)this.pattern.map[a][r]===p?e+=1:this.pattern.map[a][r]===h?t+=1:n+=1;return{countBlack:t,countWhite:e,countEmpty:n}}}]),t}(),m={name:"OthelloGame",data:function(){return{mapData:[],tooltip:""}},created:function(){this.gameInstance=new b,this.update()},methods:{getClassName:function(t){var e={"-1":"boundary",1:"black",2:"white"};return e[t]||""},move:function(t,e){var n=this.gameInstance.move(t,e);"string"!==typeof n?this.update():alert(n)},update:function(){this.mapData=this.gameInstance.getMap(),this.tooltip=this.gameInstance.getTip()},moveBack:function(){this.gameInstance.moveBack(),this.update()},reStart:function(){this.gameInstance.reStart(),this.update()}}},k=m,y=(n("a3f1"),n("2877")),g=Object(y["a"])(k,o,c,!1,null,"39d88746",null),O=g.exports,w={name:"app",components:{OthelloGame:O}},j=w,T=(n("034f"),Object(y["a"])(j,r,i,!1,null,null,null)),x=T.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(x)}}).$mount("#app")},"64a9":function(t,e,n){},a3f1:function(t,e,n){"use strict";var a=n("0b52"),r=n.n(a);r.a}});
//# sourceMappingURL=app.f83f1eae.js.map